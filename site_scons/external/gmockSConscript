Import ('env')

env = env.Clone()

CXXFLAGS = ['-Wall', '-Wextra', '-Wno-sign-compare']
env.Replace(CXXFLAGS=CXXFLAGS, CFLAGS=CXXFLAGS)

import platform
(arch,binType) = platform.architecture()
if arch == '64bit':
    env.Append(CXXFLAGS = '-fPIC', CFLAGS = '-fPIC')

name = 'gmock'
inc = env.Dir('gtest'), env.Dir('gtest/include'), env.Dir('include')
ext_inc = env.Dir('include/gmock'), env.Dir('include/gmock/internal')
src = ['gtest/src/gtest-all.cc','src/gmock-all.cc']
deps = ['pthread']

env.CreateStaticLibrary(name, inc, ext_inc, src, deps)
env.CreateDoc(name)
